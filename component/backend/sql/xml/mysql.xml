<?xml version="1.0" encoding="UTF-8"?>
<schema>
	<!-- Metadata -->
	<meta>
		<!-- Supported driver types -->
		<drivers>
			<driver>mysql</driver>
			<driver>mysqli</driver>
			<driver>pdomysql</driver>
		</drivers>
	</meta>

	<!-- SQL commands to run on installation and update -->
	<sql>
		<!-- User data export audit trail -->
		<action table="#__datacompliance_exporttrails" canfail="0">
			<condition type="missing" value="" />
			<query><![CDATA[
CREATE TABLE `#__datacompliance_exporttrails` (
`datacompliance_exporttrail_id` bigint(20) NOT NULL AUTO_INCREMENT,
`user_id` bigint(20) unsigned NOT NULL,
`created_on` datetime NOT NULL,
`created_by` bigint(20) NOT NULL,
`requester_ip` varchar(255) NOT NULL,
PRIMARY KEY (`datacompliance_exporttrail_id`),
KEY `#__datacompliance_exporttrail_user` (`user_id`)
) DEFAULT COLLATE utf8_general_ci;
            ]]></query>
		</action>

		<!-- User data wiping audit trail -->
		<action table="#__datacompliance_wipetrails" canfail="0">
			<condition type="missing" value="" />
			<query><![CDATA[
CREATE TABLE `#__datacompliance_wipetrails` (
`user_id` bigint(20) NOT NULL,
`type` enum('lifecycle','user','admin') NOT NULL DEFAULT 'user',
`created_on` datetime NOT NULL,
`created_by` bigint(20) NOT NULL,
`requester_ip` varchar(255) NOT NULL,
`items` longtext,
PRIMARY KEY (`user_id`)
) DEFAULT COLLATE utf8_general_ci;
            ]]></query>
		</action>

		<!-- Processing consent audit trail -->
		<action table="#__datacompliance_consenttrails" canfail="0">
			<condition type="missing" value="" />
			<query><![CDATA[
CREATE TABLE `#__datacompliance_consenttrails` (
`created_on` datetime NOT NULL,
`created_by` bigint(20) NOT NULL,
`requester_ip` varchar(255) NOT NULL,
`enabled` int(1) NOT NULL DEFAULT 0,
PRIMARY KEY (`created_by`)
) DEFAULT COLLATE utf8_general_ci;
            ]]></query>
		</action>

	</sql>
</schema>
